<style>
.viewAll {
  display: flex;
  flex-direction: column;
}

.viewInformation {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background-color: #b4dcea;
  width: 100%;
  height: 50%;
}

.viewHead {
  height: 5rem;
  width: 5rem;
  border: 1px solid lightcoral;
  box-shadow: 0px 0px 30px 0px rgba(256, 56, 56, 0.5);
  margin-bottom: 0.5rem;
  border-radius: 50%;
}

.textName {
  font-size: 17px;
}

.viewList {
  display: flex;
  flex-direction: column;
  height: 100%;
  width: 100%;
}

.viewListIn {
  display: flex;
  flex-direction: row;
  align-items: center;
  height: 15%;
  width: 100%;
  border-bottom: 1px solid lightgrey;
}

.listPhoto {
  padding-left: 0.5rem;
  padding-right: 0.3rem;
  height: 17px;
  width: 17px;
}
</style>
<template>
  <view style="height: {{height}}px; width: {{width}}px;" class="viewAll">
    <view class="viewInformation">
      <image class="viewHead" src="{{head}}" />
      <text class="textName">{{name}}</text>
    </view>
    <view class="viewList">
      <view class="viewListIn" @tap="pageOrder">
        <image class="listPhoto" src="{{indent}}" />
        <text class="textName">我的订单</text>
      </view>
      <view class="viewListIn" @tap="pageAddress">
        <image class="listPhoto" src="{{address}}" />
        <text class="textName">收货地址</text>
      </view>
      <view class="viewListIn" @tap="pageShop">
        <image class="listPhoto" src="{{shop}}" />
        <text class="textName">购物车</text>
      </view>
      <view class="viewListIn" @tap="pageContact">
        <image class="listPhoto" src="{{phone}}" />
        <text class="textName">联系我们</text>
      </view>
    </view>
  </view>
</template>

<script>
import wepy from 'wepy'
export default class Index extends wepy.page {
  config = {
    navigationBarTitleText: '个人中心'
  }
  data = {
    height: 0,
    width: 0,
    head: '../my/head.png',
    name: '这里是昵称🇨🇳',
    indent: '../my/indent.png',
    address: '../my/address.png',
    shop: '../images/shop.png',
    phone: '../my/phone.png'
  }
  methods = {
    pageOrder() {
      wepy.navigateTo({
        url: './my/indent'
      })
    },
    pageAddress() {
      wepy.chooseAddress({
        success: function (res) {
          console.log(JSON.stringify(res))
        },
        fail: function (err) {
          console.log(JSON.stringify(err))
        }
      })
      // wepy.navigateTo({
      //   url: './my/address'
      // })
    },
    pageShop() {
      wepy.switchTab({
        url: './shop'
      })
    },
    pageContact() {
      wepy.showModal({
        title: '手机:',
        content: '18331290663'
      })
    }
  }
  onLoad() {
    let self = this
    wepy.getUserInfo({
      success: function(res) {
        self.name = res.userInfo.nickName
        self.head = res.userInfo.avatarUrl
      }
    })
    wepy.getSystemInfo({
      success(res) {
        self.height = res.windowHeight
        self.width = res.windowWidth
      }
    })
  }
  onShow() {
    let self = this
    wepy.getUserInfo({
      success: function(res) {
        self.name = res.userInfo.nickName
        self.head = res.userInfo.avatarUrl
      }
    })
  }
}
</script>
